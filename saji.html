<!DOCTYPE html> 
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Видео + Звук с кнопкой</title>
  <style>
    *{box-sizing:border-box}
    html,body{
      height:100%;margin:0;padding:0;overflow:hidden;
      background:#000;
      font-family: Arial, sans-serif;
    }

    video.bg{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      z-index:0;
      display:none;
      filter: blur(5px);
      transform: scale(1.05);
      transition: filter .4s ease, transform .4s ease;
      background:#000;
    }

    #start-btn{
      position:fixed;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
      z-index:20;
      padding:18px 44px;
      font-size:20px;
      font-weight:700;
      border-radius:12px;
      border:none;
      background:#ffffff;
      color:#000;
      cursor:pointer;
      box-shadow:0 10px 30px rgba(0,0,0,0.6);
      transition: transform .25s ease, opacity .3s ease;
    }
    #start-btn:hover{ transform:translate(-50%,-50%) scale(1.05) }

    .profile-screen{
      position:fixed;
      inset:0;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:14px;
      z-index:21;
      color:#fff;
      pointer-events:none;
      opacity:0;
      transition: opacity .35s ease;
    }
    .profile-screen.visible{ pointer-events:auto; opacity:1 }

    .profile-screen img{
      width:120px;height:120px;border-radius:50%;
      object-fit:cover;border:4px solid #fff;
      box-shadow:0 8px 30px rgba(0,0,0,0.6);
      background:#fff;
    }

    .nickname{
      font-size:28px;font-weight:800;letter-spacing:1px;
      text-transform:uppercase;
      color:#fff;
      text-shadow:0 4px 18px rgba(0,0,0,0.6);
    }

    .enter-btn{
      padding:12px 36px;border-radius:10px;border:none;
      background:#fff;color:#000;font-weight:800;cursor:pointer;
      font-size:18px; box-shadow:0 8px 30px rgba(0,0,0,0.45);
      transition: transform .18s ease, background .18s ease;
    }
    .enter-btn:hover{ transform:scale(1.03) }

    #status{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      z-index:22; background:rgba(0,0,0,0.7); color:#fff;
      padding:8px 12px;border-radius:8px;font-size:14px;display:none;
    }
  </style>
</head>
<body>

  <!-- Видео -->
  <video id="bg-video" class="bg" loop playsinline preload="auto">
    <source src="videoplayback.webm" type="video/webm">
    <source src="videoplayback.mp4" type="video/mp4">
    Твой браузер не поддерживает видео.
  </video>

  <!-- Аудио -->
  <audio id="bg-audio" loop preload="auto">
    <source src="videoplayback.m4a" type="audio/mp4">
    <source src="videoplayback.mp3" type="audio/mpeg">
    Твой браузер не поддерживает аудио.
  </audio>

  <!-- Кнопка запуска -->
  <button id="start-btn">▶ Запустить</button>

  <!-- Профиль -->
  <div class="profile-screen" id="profile">
    <img src="photo_2025-07-17_13-30-36.jpg" alt="avatar" id="avatar">
    <div class="nickname">DEPAIVKAZIK777</div>
    <a href="https://t.me/DEPAIVKAZIK777" target="_blank">
      <button class="enter-btn" id="enterBtn">ЗАЙТИ</button>
    </a>
  </div>

  <!-- Статус -->
  <div id="status"></div>

  <script>
    const startBtn = document.getElementById('start-btn');
    const video = document.getElementById('bg-video');
    const audio = document.getElementById('bg-audio');
    const profile = document.getElementById('profile');
    const status = document.getElementById('status');

    function showStatus(text, timeout = 4000) {
      status.textContent = text;
      status.style.display = 'block';
      clearTimeout(showStatus._t);
      if (timeout) showStatus._t = setTimeout(()=> status.style.display = 'none', timeout);
    }

    startBtn.addEventListener('click', async () => {
      startBtn.disabled = true;
      showStatus('Запускаем видео и музыку...');

      video.style.display = 'block';

      const results = await Promise.allSettled([ video.play(), audio.play() ]);
      const [vRes, aRes] = results;

      if (vRes.status === 'rejected') {
        console.error('video play failed', vRes.reason);
        showStatus('Не удалось запустить видео. Проверьте файл.', 0);
        startBtn.disabled = false;
        return;
      }
      if (aRes.status === 'rejected') {
        console.warn('audio play failed', aRes.reason);
        showStatus('Видео запущено, но звук заблокирован браузером. Кликните по экрану ещё раз.', 6000);
      } else {
        showStatus('Видео и звук запущены', 1500);
      }

      startBtn.style.transition = 'opacity .35s ease';
      startBtn.style.opacity = '0';
      setTimeout(()=> startBtn.style.display = 'none', 360);
      profile.classList.add('visible');
    });

    // Пауза и возобновление при смене вкладки
    document.addEventListener("visibilitychange", () => {
      if (document.hidden) {
        video.pause();
        audio.pause();
      } else {
        // Возобновляем с того же места
        video.play().catch(()=>{});
        audio.play().catch(()=>{});
      }
    });
  </script>
</body>
</html>
